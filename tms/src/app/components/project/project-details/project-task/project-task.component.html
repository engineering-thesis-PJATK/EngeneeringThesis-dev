<!-- TODO: do zrobienia 'sidenav' do wprowadzania czasu oraz drugi sidenav do edycji istniejÄ…cego taska -->
<ul id="hours" class="sidenav width-400px">
  <li>
    <div class="user-view">
      <div class="background">
        <img src="images/office.jpg" />
      </div>
      <a href="#user"><img class="circle" src="images/yuna.jpg" /></a>
      <a href="#name"><span class="white-text name">John Doe</span></a>
      <a href="#email"
        ><span class="white-text email">jdandturk@gmail.com</span></a
      >
    </div>
  </li>
  <li>
    <a href="#!"><i class="material-icons">cloud</i>First Link With Icon</a>
  </li>
  <li><a href="#!">Second Link</a></li>
  <li><div class="divider"></div></li>
  <li><a class="subheader">Subheader</a></li>
  <li><a class="waves-effect" href="#!">Third Link With Waves</a></li>
</ul>

<!-- <a href="#"  data-target="hours" class="sidenav-trigger"><i class="material-icons">menu</i></a> -->

<ul class="collapsible">
  <li *ngIf="tasks">
    <div class="collapsible-header">
      <i class="material-icons">assignment_returned</i>Tasks
    </div>
    <div class="collapsible-body collapsible-body-background" *ngIf="tasks">
      <table class="highlight centered">
        <thead>
          <tr class="address-tr">
            <th>Employee</th>
            <th>Description</th>
            <th>Options</th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let task of tasks | async" class="centered-table-tr">
            <td>{{ task.ptEmpName }}</td>
            <td>{{ task.ptContent }}</td>
            <td>
              <i class="material-icons prefix edit">edit</i>
              <i class="material-icons prefix archive">assignment_turned_in</i>
              <i class="material-icons prefix time">timelapse</i>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </li>
  <li>
    <div class="collapsible-header">
      <i class="material-icons">assignment</i>Add task
    </div>
    <div class="collapsible-body collapsible-body-background">
      <form class="row" name="form" #form="ngForm">
        <div class="input-field col s12 m4 l4 xl4">
          <i class="material-icons prefix">person_add</i>
          <select
            id="empName"
            name="empName"
            class="test"
            required
            #empName="ngModel"
            [(ngModel)]="sendingTask.ptEmpId"
          >
            <option value="" disabled>Pick one</option>
            <option
              *ngFor="let employee of employees | async"
              [value]="employee?.empId"
            >
              {{ employee?.empName + " " + employee?.empSurname }}
            </option>
          </select>
          <label for="empName">Employee</label>
          <ng-container
            *ngIf="empName.invalid && (empName.dirty || empName.touched)"
          >
            <span
              class="red-text text-lighten-1"
              *ngIf="empName.errors?.['required']"
              >Field is required</span
            >
          </ng-container>
        </div>
        <!-- pole tekstowe z opisiem -->
        <div class="input-field col s12 m6 l6 xl6">
            <i class="material-icons prefix">description</i>
        <input
          id="Name"
          name="Name"
          type="text"
          required
          [(ngModel)]="sendingTask.ptContent"
          #Name="ngModel"
          minlength="2"
          maxlength="1000"
        />
        <label for="Name">Description</label>
        <ng-container *ngIf="Name.invalid && (Name.dirty || Name.touched)">
            <span
            class="red-text text-lighten-1"
            *ngIf="Name.errors?.['required']"
            >Field is required</span
          >
          <span
            class="red-text text-lighten-1"
            *ngIf="Name.errors?.['minlength']"
            >Text is too short</span
          >
          <span
            class="red-text text-lighten-1"
            *ngIf="Name.errors?.['maxlength']"
            >Text is too long</span
          >
        </ng-container>
        </div>
        <!-- button send -->
        <div class="col s6 m2 l2 xl2">
            <button
              class="waves-effect waves-yellow btn-large btn-submit"
              type="submit"
              [disabled]="form.invalid"
              (click)="addTask()"
            >
              Create
            </button>
          </div>
      </form>
    </div>
  </li>
</ul>
